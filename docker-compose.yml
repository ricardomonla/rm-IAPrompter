version: '3.8'

services:
  backend:
    container_name: mfm-backend
    build: .  # <--- CAMBIO IMPORTANTE: Construir desde el directorio actual
    working_dir: /app
    ports:
      - "5000:5000"
    volumes:
      # Mapeo de procesos (Solo Linux)
      - /proc:/host/proc:ro
      
      # CÃ³digo en vivo (opcional, para desarrollo)
      - ./app.py:/app/app.py
      
      # Datos persistentes
      - ./app-data:/app/data
    env_file:
      - .env
    # Ya no necesitamos 'command' porque el Dockerfile se encarga
    restart: unless-stopped